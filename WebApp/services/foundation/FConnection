<?php

class FConnection {

    
    public $entityManager;

    private static $instance = null;
    private function __construct() {
        $this->entityManager = FEntityManager::getInstance()->getEntityManager();  
    }

    private static function getInstance(): FConnection {
        // private constructor to prevent external instantiation
        if (self::$instance==null) {
            self::$instance = new FConnection();
             
        }
        return  self::$instance;
    }

    public static function lockTable(string $tableName): void {
        $conn = self::getInstance()->entityManager->getConnection();
        $conn->executeQuery("LOCK TABLES $tableName WRITE");
        
    }

    public static function unlockTable(string $tableName): void {
        $conn = self::getInstance()->entityManager->getConnection();
        $conn->executeQuery("UNLOCK TABLES $tableName WRITE");
    }
}